{"ast":null,"code":"import { JwtHelperService } from '@auth0/angular-jwt';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AuthService {\n  constructor(http) {\n    this.http = http;\n    this.baseURL = 'https://localhost:5001/api/user/';\n    this.jwtHelper = new JwtHelperService();\n  }\n  login(model) {\n    return this.http.post(`${this.baseURL}login`, model).pipe(map(response => {\n      const user = response;\n      if (user) {\n        localStorage.setItem('token', user.token);\n        this.decodedToken = this.jwtHelper.decodeToken(user.token);\n        sessionStorage.setItem('username', this.decodedToken.unique_name);\n      }\n    }));\n  }\n  register(model) {\n    return this.http.post(`${this.baseURL}register`, model);\n  }\n  // SUGESTÃO DO https://www.udemy.com/user/luiz-pires/\n  // loggedIn() {\n  //   const token = localStorage.getItem('token');\n  //   this.tokenOk = this.jwtHelper.isTokenExpired(token);\n  //\n  //   if (this.tokenOk) {\n  //     window.localStorage.removeItem('token');\n  //   }\n  //   return !this.tokenOk;\n  // }\n  loggedIn() {\n    const token = localStorage.getItem('token');\n    return !this.jwtHelper.isTokenExpired(token);\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,GAAG,QAAQ,gBAAgB;;;AAMpC,OAAM,MAAOC,WAAW;EAMtBC,WAAA,CAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAJxB,KAAAC,OAAO,GAAG,kCAAkC;IAC5C,KAAAC,SAAS,GAAG,IAAIN,gBAAgB,EAAE;EAGM;EAExCO,KAAK,CAACC,KAAU;IACd,OAAO,IAAI,CAACJ,IAAI,CACbK,IAAI,CAAC,GAAG,IAAI,CAACJ,OAAO,OAAO,EAAEG,KAAK,CAAC,CAACE,IAAI,CACvCT,GAAG,CAAEU,QAAa,IAAI;MACpB,MAAMC,IAAI,GAAGD,QAAQ;MACrB,IAAIC,IAAI,EAAE;QACRC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACG,KAAK,CAAC;QACzC,IAAI,CAACC,YAAY,GAAG,IAAI,CAACV,SAAS,CAACW,WAAW,CAACL,IAAI,CAACG,KAAK,CAAC;QAC1DG,cAAc,CAACJ,OAAO,CAAC,UAAU,EAAE,IAAI,CAACE,YAAY,CAACG,WAAW,CAAC;;IAErE,CAAC,CAAC,CACH;EACL;EAEAC,QAAQ,CAACZ,KAAU;IACjB,OAAO,IAAI,CAACJ,IAAI,CAACK,IAAI,CAAC,GAAG,IAAI,CAACJ,OAAO,UAAU,EAAEG,KAAK,CAAC;EACzD;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEAa,QAAQ;IACN,MAAMN,KAAK,GAAGF,YAAY,CAACS,OAAO,CAAC,OAAO,CAAC;IAC3C,OAAO,CAAC,IAAI,CAAChB,SAAS,CAACiB,cAAc,CAACR,KAAK,CAAC;EAC9C;;AAxCWb,WAAW;mBAAXA,WAAW,EAAAsB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAXzB,WAAW;SAAXA,WAAW;EAAA0B,OAAA,EAAX1B,WAAW,CAAA2B,IAAA;EAAAC,UAAA,EAFV;AAAM","names":["JwtHelperService","map","AuthService","constructor","http","baseURL","jwtHelper","login","model","post","pipe","response","user","localStorage","setItem","token","decodedToken","decodeToken","sessionStorage","unique_name","register","loggedIn","getItem","isTokenExpired","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sourceRoot":"","sources":["C:\\Projetos\\ProEventos-Final\\Front\\ProEventos-App\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { JwtHelperService } from '@auth0/angular-jwt';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n\r\n  baseURL = 'https://localhost:5001/api/user/';\r\n  jwtHelper = new JwtHelperService();\r\n  decodedToken: any;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  login(model: any) {\r\n    return this.http\r\n      .post(`${this.baseURL}login`, model).pipe(\r\n        map((response: any) => {\r\n          const user = response;\r\n          if (user) {\r\n            localStorage.setItem('token', user.token);\r\n            this.decodedToken = this.jwtHelper.decodeToken(user.token);\r\n            sessionStorage.setItem('username', this.decodedToken.unique_name);\r\n          }\r\n        })\r\n      );\r\n  }\r\n\r\n  register(model: any) {\r\n    return this.http.post(`${this.baseURL}register`, model);\r\n  }\r\n\r\n  // SUGESTÃO DO https://www.udemy.com/user/luiz-pires/\r\n  // loggedIn() {\r\n  //   const token = localStorage.getItem('token');\r\n  //   this.tokenOk = this.jwtHelper.isTokenExpired(token);\r\n  //\r\n  //   if (this.tokenOk) {\r\n  //     window.localStorage.removeItem('token');\r\n  //   }\r\n  //   return !this.tokenOk;\r\n  // }\r\n\r\n  loggedIn() {\r\n    const token = localStorage.getItem('token');\r\n    return !this.jwtHelper.isTokenExpired(token);\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}