{"ast":null,"code":"import { environment } from '@environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/services/evento.service\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"ngx-bootstrap/collapse\";\nimport * as i9 from \"ngx-bootstrap/tooltip\";\nfunction EventoListaComponent_tbody_34_tr_1_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" N\\u00E3o Informado \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EventoListaComponent_tbody_34_tr_1_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"uppercase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const evento_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, evento_r5.lotes[0] == null ? null : evento_r5.lotes[0].nome), \" \");\n  }\n}\nfunction EventoListaComponent_tbody_34_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 17);\n    i0.ɵɵlistener(\"click\", function EventoListaComponent_tbody_34_tr_1_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const evento_r5 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.detalheEvento(evento_r5.id));\n    });\n    i0.ɵɵelementStart(1, \"td\", 12);\n    i0.ɵɵelement(2, \"img\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 12);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 12);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 12);\n    i0.ɵɵtemplate(14, EventoListaComponent_tbody_34_tr_1_div_14_Template, 2, 0, \"div\", 14);\n    i0.ɵɵtemplate(15, EventoListaComponent_tbody_34_tr_1_div_15_Template, 3, 3, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\")(17, \"div\", 19)(18, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function EventoListaComponent_tbody_34_tr_1_Template_button_click_18_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const evento_r5 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      const _r2 = i0.ɵɵreference(37);\n      return i0.ɵɵresetView(ctx_r11.openModal($event, _r2, evento_r5.id));\n    });\n    i0.ɵɵelement(19, \"i\", 21);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const evento_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r4.larguraImagem, \"px\")(\"margin\", ctx_r4.margemImagem, \"px\");\n    i0.ɵɵproperty(\"collapse\", !ctx_r4.exibirImagem)(\"isAnimated\", true)(\"src\", ctx_r4.mostraImagem(evento_r5.imagemURL), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(evento_r5.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(evento_r5.tema);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(evento_r5.local);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(evento_r5.dataEvento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(evento_r5.qtdPessoas);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !evento_r5.lotes.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", evento_r5.lotes.length);\n  }\n}\nfunction EventoListaComponent_tbody_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtemplate(1, EventoListaComponent_tbody_34_tr_1_Template, 20, 14, \"tr\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.eventosFiltrados);\n  }\n}\nfunction EventoListaComponent_tfoot_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tfoot\")(1, \"tr\")(2, \"td\", 22)(3, \"h4\");\n    i0.ɵɵtext(4, \" Nenhum evento encontrado! \");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction EventoListaComponent_ng_template_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function EventoListaComponent_ng_template_36_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.confirm());\n    });\n    i0.ɵɵtext(4, \"Sim\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function EventoListaComponent_ng_template_36_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.decline());\n    });\n    i0.ɵɵtext(6, \"N\\u00E3o\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Tem certeza que quer deletar o Evento de c\\u00F3digo: \", ctx_r3.eventoId, \"?\");\n  }\n}\nexport class EventoListaComponent {\n  get filtroLista() {\n    return this.filtroListado;\n  }\n  set filtroLista(value) {\n    this.filtroListado = value;\n    this.eventosFiltrados = this.filtroLista ? this.filtrarEventos(this.filtroLista) : this.eventos;\n  }\n  filtrarEventos(filtrarPor) {\n    filtrarPor = filtrarPor.toLocaleLowerCase();\n    return this.eventos.filter(evento => evento.tema.toLocaleLowerCase().indexOf(filtrarPor) !== -1 || evento.local.toLocaleLowerCase().indexOf(filtrarPor) !== -1);\n  }\n  constructor(eventoService, modalService, toastr, spinner, router) {\n    this.eventoService = eventoService;\n    this.modalService = modalService;\n    this.toastr = toastr;\n    this.spinner = spinner;\n    this.router = router;\n    this.eventos = [];\n    this.eventosFiltrados = [];\n    this.larguraImagem = 70;\n    this.margemImagem = 2;\n    this.exibirImagem = true;\n    this.filtroListado = '';\n    this.eventoId = 0;\n  }\n  ngOnInit() {\n    this.spinner.show();\n    this.carregarEventos();\n  }\n  alterarImagem() {\n    this.exibirImagem = !this.exibirImagem;\n  }\n  mostraImagem(imagemURL) {\n    return imagemURL !== '' ? `${environment.apiURL}resources/images/${imagemURL}` : 'assets/img/semImagem.jpeg';\n  }\n  carregarEventos() {\n    this.eventoService.getEventos().subscribe({\n      next: eventos => {\n        this.eventos = eventos;\n        this.eventosFiltrados = this.eventos;\n      },\n      error: error => {\n        this.spinner.hide();\n        this.toastr.error('Erro ao Carregar os Eventos', 'Erro!');\n      },\n      complete: () => this.spinner.hide()\n    });\n  }\n  openModal(event, template, eventoId) {\n    event.stopPropagation();\n    this.eventoId = eventoId;\n    this.modalRef = this.modalService.show(template, {\n      class: 'modal-sm'\n    });\n  }\n  confirm() {\n    this.modalRef.hide();\n    this.spinner.show();\n    this.eventoService.deleteEvento(this.eventoId).subscribe(result => {\n      if (result.message === 'Deletado') {\n        this.toastr.success('O Evento deletado com Sucesso.', 'Deletado!');\n        this.carregarEventos();\n      }\n    }, error => {\n      console.error(error);\n      this.toastr.error(`Erro ao tentar deletar o evento ${this.eventoId}`, 'Erro');\n    }).add(() => this.spinner.hide());\n  }\n  decline() {\n    this.modalRef.hide();\n  }\n  detalheEvento(id) {\n    this.router.navigate([`eventos/detalhe/${id}`]);\n  }\n}\nEventoListaComponent.ɵfac = function EventoListaComponent_Factory(t) {\n  return new (t || EventoListaComponent)(i0.ɵɵdirectiveInject(i1.EventoService), i0.ɵɵdirectiveInject(i2.BsModalService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.Router));\n};\nEventoListaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EventoListaComponent,\n  selectors: [[\"app-evento-lista\"]],\n  decls: 38,\n  vars: 7,\n  consts: [[1, \"card\", \"rounded\", \"shadow-sm\", \"p-3\"], [1, \"d-flex\"], [1, \"flex-fill\", \"pr-3\"], [1, \"input-group\", \"mb-2\"], [1, \"input-group-prepend\"], [1, \"input-group-text\"], [\"type\", \"text\", \"placeholder\", \"Filtrar por Tema e Local\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"routerLink\", \"/eventos/detalhe\", 1, \"d-flex\", \"btn\", \"btn-outline-primary\"], [1, \"fa\", \"fa-plus-circle\", \"my-1\"], [1, \"ml-1\", \"d-none\", \"d-sm-block\"], [1, \"table\", \"table-striped\", \"table-hover\"], [1, \"thead-dark\"], [1, \"d-none\", \"d-md-table-cell\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-light\", \"btn-sm\", 3, \"click\"], [4, \"ngIf\"], [\"template\", \"\"], [\"style\", \"cursor: pointer;\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [3, \"collapse\", \"isAnimated\", \"src\"], [1, \"btn-group\"], [\"tooltip\", \"Excluir\", 1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"fa\", \"fa-eraser\"], [\"colspan\", \"7\", 1, \"text-center\"], [1, \"modal-body\", \"text-center\"], [\"type\", \"button\", 1, \"btn\", \"btn-default\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function EventoListaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5);\n      i0.ɵɵtext(6, \"Filtro: \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function EventoListaComponent_Template_input_ngModelChange_7_listener($event) {\n        return ctx.filtroLista = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\")(9, \"a\", 7);\n      i0.ɵɵelement(10, \"i\", 8);\n      i0.ɵɵelementStart(11, \"b\", 9);\n      i0.ɵɵtext(12, \"Novo\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(13, \"table\", 10)(14, \"thead\", 11)(15, \"tr\")(16, \"th\", 12)(17, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function EventoListaComponent_Template_button_click_17_listener() {\n        return ctx.alterarImagem();\n      });\n      i0.ɵɵelement(18, \"i\");\n      i0.ɵɵtext(19);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"th\");\n      i0.ɵɵtext(21, \"#\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"th\");\n      i0.ɵɵtext(23, \"Tema\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"th\", 12);\n      i0.ɵɵtext(25, \"Local\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"th\");\n      i0.ɵɵtext(27, \"Data\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"th\", 12);\n      i0.ɵɵtext(29, \"Qtde Pessoas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"th\", 12);\n      i0.ɵɵtext(31, \"Lote\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"th\");\n      i0.ɵɵtext(33, \"Op\\u00E7\\u00F5es\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(34, EventoListaComponent_tbody_34_Template, 2, 1, \"tbody\", 14);\n      i0.ɵɵtemplate(35, EventoListaComponent_tfoot_35_Template, 5, 0, \"tfoot\", 14);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(36, EventoListaComponent_ng_template_36_Template, 7, 1, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.filtroLista);\n      i0.ɵɵadvance(11);\n      i0.ɵɵclassMap(!ctx.exibirImagem ? \"fa fa-eye\" : \"fa fa-eye-slash\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", !ctx.exibirImagem ? \"exibir\" : \"ocultar\", \" \");\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventos && ctx.eventos.length);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.eventos);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i5.RouterLink, i7.DefaultValueAccessor, i7.NgControlStatus, i8.CollapseDirective, i9.TooltipDirective, i7.NgModel, i6.UpperCasePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["environment","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","evento_r5","lotes","nome","ɵɵlistener","EventoListaComponent_tbody_34_tr_1_Template_tr_click_0_listener","restoredCtx","ɵɵrestoreView","_r10","$implicit","ctx_r9","ɵɵnextContext","ɵɵresetView","detalheEvento","id","ɵɵelement","ɵɵtemplate","EventoListaComponent_tbody_34_tr_1_div_14_Template","EventoListaComponent_tbody_34_tr_1_div_15_Template","EventoListaComponent_tbody_34_tr_1_Template_button_click_18_listener","$event","ctx_r11","_r2","ɵɵreference","openModal","ɵɵstyleProp","ctx_r4","larguraImagem","margemImagem","ɵɵproperty","exibirImagem","mostraImagem","imagemURL","ɵɵsanitizeUrl","ɵɵtextInterpolate","tema","local","dataEvento","qtdPessoas","length","EventoListaComponent_tbody_34_tr_1_Template","ctx_r0","eventosFiltrados","EventoListaComponent_ng_template_36_Template_button_click_3_listener","_r13","ctx_r12","confirm","EventoListaComponent_ng_template_36_Template_button_click_5_listener","ctx_r14","decline","ctx_r3","eventoId","EventoListaComponent","filtroLista","filtroListado","value","filtrarEventos","eventos","filtrarPor","toLocaleLowerCase","filter","evento","indexOf","constructor","eventoService","modalService","toastr","spinner","router","ngOnInit","show","carregarEventos","alterarImagem","apiURL","getEventos","subscribe","next","error","hide","complete","event","template","stopPropagation","modalRef","class","deleteEvento","result","message","success","console","add","navigate","ɵɵdirectiveInject","i1","EventoService","i2","BsModalService","i3","ToastrService","i4","NgxSpinnerService","i5","Router","selectors","decls","vars","consts","EventoListaComponent_Template","rf","ctx","EventoListaComponent_Template_input_ngModelChange_7_listener","EventoListaComponent_Template_button_click_17_listener","EventoListaComponent_tbody_34_Template","EventoListaComponent_tfoot_35_Template","EventoListaComponent_ng_template_36_Template","ɵɵtemplateRefExtractor","ɵɵclassMap"],"sourceRoot":"","sources":["C:\\Projetos\\ProEventos-Final\\Front\\ProEventos-App\\src\\app\\components\\eventos\\evento-lista\\evento-lista.component.ts","C:\\Projetos\\ProEventos-Final\\Front\\ProEventos-App\\src\\app\\components\\eventos\\evento-lista\\evento-lista.component.html"],"sourcesContent":["import { Component, OnInit, TemplateRef } from '@angular/core';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Evento } from '@app/models/Evento';\r\nimport { EventoService } from '@app/services/evento.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Router } from '@angular/router';\r\nimport { environment } from '@environments/environment';\r\n\r\n\r\n@Component({\r\n  selector: 'app-evento-lista',\r\n  templateUrl: './evento-lista.component.html',\r\n  styleUrls: ['./evento-lista.component.scss']\r\n})\r\nexport class EventoListaComponent implements OnInit {\r\n\r\n  modalRef!: BsModalRef;\r\n  public eventos: Evento[] = [];\r\n  public eventosFiltrados: Evento[] = [];\r\n\r\n  public larguraImagem = 70;\r\n  public margemImagem = 2;\r\n  public exibirImagem = true;\r\n  private filtroListado = '';\r\n  public eventoId = 0;\r\n  dataAtual: string;\r\n\r\n  public get filtroLista(): string {\r\n    return this.filtroListado;\r\n  }\r\n\r\n  public set filtroLista(value: string) {\r\n    this.filtroListado = value;\r\n    this.eventosFiltrados = this.filtroLista ? this.filtrarEventos(this.filtroLista) : this.eventos;\r\n  }\r\n\r\n  public filtrarEventos(filtrarPor: string): Evento[] {\r\n    filtrarPor = filtrarPor.toLocaleLowerCase();\r\n    return this.eventos.filter(\r\n      evento => evento.tema.toLocaleLowerCase().indexOf(filtrarPor) !== -1 ||\r\n      evento.local.toLocaleLowerCase().indexOf(filtrarPor) !== -1\r\n    );\r\n  }\r\n\r\n  constructor(\r\n    private eventoService: EventoService,\r\n    private modalService: BsModalService,\r\n    private toastr: ToastrService,\r\n    private spinner: NgxSpinnerService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  public ngOnInit(): void {\r\n    this.spinner.show();\r\n    this.carregarEventos();\r\n  }\r\n\r\n  public alterarImagem(): void {\r\n    this.exibirImagem = !this.exibirImagem;\r\n  }\r\n\r\n    public mostraImagem(imagemURL: string): string {\r\n    return (imagemURL !== '')\r\n      ? `${environment.apiURL}resources/images/${imagemURL}`\r\n      : 'assets/img/semImagem.jpeg';\r\n  }\r\n\r\n  public carregarEventos(): void {\r\n    this.eventoService.getEventos().subscribe({\r\n      next: (eventos: Evento[]) => {\r\n        this.eventos = eventos;\r\n        this.eventosFiltrados = this.eventos;\r\n      },\r\n      error: (error: any) => {\r\n        this.spinner.hide();\r\n        this.toastr.error('Erro ao Carregar os Eventos', 'Erro!');\r\n      },\r\n      complete: () => this.spinner.hide()\r\n    });\r\n  }\r\n\r\n  openModal(event: any, template: TemplateRef<any>, eventoId: number): void {\r\n    event.stopPropagation();\r\n    this.eventoId = eventoId;\r\n    this.modalRef = this.modalService.show(template, {class: 'modal-sm'});\r\n  }\r\n\r\n  confirm(): void {\r\n    this.modalRef.hide();\r\n    this.spinner.show();\r\n\r\n    this.eventoService.deleteEvento(this.eventoId).subscribe(\r\n      (result: any) => {\r\n        if (result.message === 'Deletado') {\r\n          this.toastr.success('O Evento deletado com Sucesso.', 'Deletado!');\r\n          this.carregarEventos();\r\n        }\r\n      },\r\n      (error: any) => {\r\n        console.error(error);\r\n        this.toastr.error(`Erro ao tentar deletar o evento ${this.eventoId}`, 'Erro');\r\n      }\r\n    ).add(() => this.spinner.hide());\r\n  }\r\n\r\n\r\n  decline(): void {\r\n    this.modalRef.hide();\r\n  }\r\n\r\n    detalheEvento(id: number): void{\r\n    this.router.navigate([`eventos/detalhe/${id}`]);\r\n  }\r\n\r\n}\r\n","<div class=\"card rounded shadow-sm p-3\">\r\n    <div class=\"d-flex\">\r\n        <div class=\"flex-fill pr-3\">\r\n            <div class=\"input-group mb-2\">\r\n                <div class=\"input-group-prepend\">\r\n                    <div class=\"input-group-text\">Filtro: </div>\r\n                </div>\r\n                <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Filtrar por Tema e Local\"\r\n                [(ngModel)]=\"filtroLista\"\r\n                >\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <a class=\"d-flex btn btn-outline-primary\" routerLink=\"/eventos/detalhe\">\r\n                <i class=\"fa fa-plus-circle my-1\"></i>\r\n                <b class=\"ml-1 d-none d-sm-block\">Novo</b>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    \r\n    \r\n    <table class=\"table table-striped table-hover\">\r\n        <thead class=\"thead-dark\">\r\n            <tr>\r\n                <th class=\"d-none d-md-table-cell\">\r\n                    <button type=\"button\" class=\"btn btn-outline-light btn-sm\"\r\n                    (click)=\"alterarImagem()\">\r\n                    <i class=\"{{!exibirImagem ? 'fa fa-eye' : 'fa fa-eye-slash'}}\"></i>\r\n                    {{!exibirImagem ? 'exibir' : 'ocultar'}}\r\n                </button>\r\n            </th>\r\n            <th>#</th>\r\n            <th>Tema</th>\r\n            <th class=\"d-none d-md-table-cell\">Local</th>\r\n            <th>Data</th>\r\n            <th class=\"d-none d-md-table-cell\">Qtde Pessoas</th>\r\n            <th class=\"d-none d-md-table-cell\">Lote</th>\r\n            <th>Opções</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody *ngIf=\"eventos && eventos.length\">\r\n        <tr *ngFor=\"let evento of eventosFiltrados\" (click)=\"detalheEvento(evento.id)\" style=\"cursor: pointer;\">\r\n            <td class=\"d-none d-md-table-cell\">\r\n                <img [collapse]=\"!exibirImagem\"\r\n                [isAnimated]=\"true\"\r\n                [src]=\"mostraImagem(evento.imagemURL)\"\r\n                [style.width.px]=\"larguraImagem\"\r\n                [style.margin.px]=\"margemImagem\"\r\n                >\r\n            </td>\r\n            <td>{{evento.id}}</td>\r\n            <td>{{evento.tema}}</td>\r\n            <td class=\"d-none d-md-table-cell\">{{evento.local}}</td>\r\n            <td>{{evento.dataEvento}}</td>\r\n            <td class=\"d-none d-md-table-cell\">{{evento.qtdPessoas}}</td>\r\n            <td class=\"d-none d-md-table-cell\">\r\n                <div *ngIf=\"!evento.lotes.length\">\r\n                    Não Informado\r\n                </div>\r\n                <div *ngIf=\"evento.lotes.length\">\r\n                    {{evento.lotes[0]?.nome | uppercase}}\r\n                </div>\r\n            </td>\r\n            <td>\r\n                <div class=\"btn-group\">\r\n                    <button class=\"btn btn-sm btn-danger\" tooltip=\"Excluir\" (click)=\"openModal($event, template, evento.id)\">\r\n                        <i class=\"fa fa-eraser\"></i>\r\n                    </button>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n    <tfoot *ngIf=\"!eventos\">\r\n        <tr>\r\n            <td colspan=\"7\" class=\"text-center\">\r\n                <h4>\r\n                    Nenhum evento encontrado!\r\n                </h4>\r\n            </td>\r\n        </tr>\r\n    </tfoot>\r\n</table>\r\n</div>\r\n<!-- para saber os nomes dos campo --> \r\n<!-- {{eventos | json}} -->\r\n\r\n<ng-template #template>\r\n    <div class=\"modal-body text-center\">\r\n        <p>Tem certeza que quer deletar o Evento de código: {{this.eventoId}}?</p>\r\n        <button type=\"button\" class=\"btn btn-default\" (click)=\"confirm()\" >Sim</button>\r\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"decline()\" >Não</button>\r\n    </div>\r\n</ng-template>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}